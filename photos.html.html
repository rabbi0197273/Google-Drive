<link rel="icon" href="drive-logo.png">
<title>PhotoPlyr - Google Drive Photo Viewer with Direct Links</title>
    
<!-- Meta Tags for SEO -->
<meta name="description" content="PhotoPlyr is a Google Drive Photo Viewer with Direct Image Links and Many Features. View your photos from Google Drive with ease.">
<meta name="keywords" content="PhotoPlyr, Google Drive, Photo Viewer, Direct Links, Image Viewer">
<meta name="author" content="Rabbi123">

<!-- Open Graph / Facebook -->
<meta property="og:type" content="website">
<meta property="og:url" content="https://rabbi0197273.github.io/Rabbi123/">
<meta property="og:title" content="PhotoPlyr - Google Drive Photo Viewer with Direct Links">
<meta property="og:description" content="PhotoPlyr is a Google Drive Photo Viewer with Direct Image Links and Many Features. View your photos from Google Drive with ease.">
<meta property="og:image" content="https://sh20raj.github.io/DrivePlyr/drive-logo.png">

<!-- Twitter -->
<meta property="twitter:card" content="summary_large_image">
<meta property="twitter:url" content="https://rabbi0197273.github.io/Rabbi123/">
<meta property="twitter:title" content="PhotoPlyr - Google Drive Photo Viewer with Direct Links">
<meta property="twitter:description" content="PhotoPlyr is a Google Drive Photo Viewer with Direct Image Links and Many Features. View your photos from Google Drive with ease.">
<meta property="twitter:image" content="https://sh20raj.github.io/DrivePlyr/drive-logo.png">

<!-- Other Meta Tags -->
<link rel="icon" href="https://raw.githubusercontent.com/SH20RAJ/DrivePlyr/main/drive-logo.png">
<meta name="theme-color" content="#ffffff">
<meta name="robots" content="index, follow">

<style>
  body {
    margin: 0;
    padding: 0;
    background: #000;
    font-family: Arial, sans-serif;
    overflow: hidden;
  }

  .photo-container {
    position: relative;
    width: 100vw;
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    background: #000;
  }

  .main-photo {
    max-width: 100%;
    max-height: 100%;
    object-fit: contain;
    cursor: pointer;
  }

  .loading {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: white;
    font-size: 18px;
    text-align: center;
  }

  .controls {
    position: absolute;
    top: 20px;
    right: 20px;
    display: flex;
    gap: 10px;
    opacity: 0;
    transition: opacity 0.3s;
  }

  .photo-container:hover .controls {
    opacity: 1;
  }

  .btn {
    background: rgba(255,255,255,0.2);
    border: none;
    color: white;
    padding: 10px 15px;
    border-radius: 5px;
    cursor: pointer;
    font-size: 14px;
    backdrop-filter: blur(10px);
  }

  .btn:hover {
    background: rgba(255,255,255,0.3);
  }

  .link-display {
    position: absolute;
    bottom: 20px;
    left: 20px;
    right: 20px;
    background: rgba(0,0,0,0.8);
    color: white;
    padding: 15px;
    border-radius: 5px;
    font-family: monospace;
    font-size: 12px;
    word-break: break-all;
    opacity: 0;
    transition: opacity 0.3s;
    backdrop-filter: blur(10px);
  }

  .link-display.show {
    opacity: 1;
  }

  .error {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: white;
    text-align: center;
    font-size: 18px;
  }

  @media (max-width: 768px) {
    .controls {
      top: 10px;
      right: 10px;
      gap: 5px;
    }
    
    .btn {
      padding: 8px 12px;
      font-size: 12px;
    }
    
    .link-display {
      bottom: 10px;
      left: 10px;
      right: 10px;
      padding: 10px;
      font-size: 10px;
    }
  }
</style>

<div class="photo-container">
  <div class="loading" id="loading">Loading photo...</div>
  <div class="error" id="error" style="display: none;">
    ‚ùå ‡¶õ‡¶¨‡¶ø ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá‡¶®‡¶ø<br>
    <small>‡¶≤‡¶ø‡¶Ç‡¶ï ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶è‡¶¨‡¶Ç ‡¶õ‡¶¨‡¶ø‡¶ü‡¶ø public ‡¶ï‡¶ø‡¶®‡¶æ ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®</small>
  </div>
  
  <img class="main-photo" id="mainPhoto" style="display: none;" alt="Photo">
  
  <div class="controls">
    <button class="btn" id="linkBtn">üîó Link</button>
    <button class="btn" id="downloadBtn">‚¨áÔ∏è Download</button>
    <button class="btn" id="fullscreenBtn">‚õ∂ Full</button>
  </div>
  
  <div class="link-display" id="linkDisplay">
    <strong>Direct Image Link:</strong><br>
    <span id="linkText"></span><br>
    <button class="btn" id="copyBtn" style="margin-top: 10px;">Copy Link</button>
  </div>
</div>

<script>
  var apikey = ['AIzaSyCt3DULzE2trDJhfFUosWZT-3GEObbMqVU', 'AIzaSyCsbx8BSyLwkw6XX6Lg5OF1U0HNtI9VmCY', 'AIzaSyBLMJAT6oqTZxAMsCsMjXzoo4lkJL4MmfM', 'AIzaSyCIY6fomcJxOt0XQ_naa1rzfd5wlOMGKDY'][Math.floor(Math.random() * 4)];
  console.log('Using API Key:', apikey);

  function getparam(a, e) {
    return e || (e = window.location.href), new URL(e).searchParams.get(a);
  }

  const loading = document.getElementById('loading');
  const error = document.getElementById('error');
  const mainPhoto = document.getElementById('mainPhoto');
  const linkDisplay = document.getElementById('linkDisplay');
  const linkText = document.getElementById('linkText');
  const linkBtn = document.getElementById('linkBtn');
  const downloadBtn = document.getElementById('downloadBtn');
  const fullscreenBtn = document.getElementById('fullscreenBtn');
  const copyBtn = document.getElementById('copyBtn');

  let currentPhotoUrl = '';

  // Initialize
  if (getparam('id')) {
    try {
      const json = JSON.parse(atob(getparam('id')));
      const driveid = json.id;
      
      if (driveid) {
        currentPhotoUrl = `https://www.googleapis.com/drive/v3/files/${driveid}?alt=media&key=${apikey}`;
        loadPhoto();
      } else {
        showError();
      }
    } catch (e) {
      console.error('Error:', e);
      showError();
    }
  } else {
    showError();
  }

  function loadPhoto() {
    mainPhoto.onload = function() {
      loading.style.display = 'none';
      mainPhoto.style.display = 'block';
      linkText.textContent = currentPhotoUrl;
    };

    mainPhoto.onerror = function() {
      showError();
    };

    mainPhoto.src = currentPhotoUrl;
  }

  function showError() {
    loading.style.display = 'none';
    error.style.display = 'block';
  }

  // Event Listeners
  linkBtn.addEventListener('click', () => {
    linkDisplay.classList.toggle('show');
  });

  downloadBtn.addEventListener('click', () => {
    const a = document.createElement('a');
    a.href = currentPhotoUrl;
    a.download = 'photo.jpg';
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
  });

  fullscreenBtn.addEventListener('click', () => {
    if (document.fullscreenElement) {
      document.exitFullscreen();
    } else {
      document.documentElement.requestFullscreen();
    }
  });

  copyBtn.addEventListener('click', () => {
    navigator.clipboard.writeText(currentPhotoUrl).then(() => {
      copyBtn.textContent = 'Copied! ‚úÖ';
      setTimeout(() => {
        copyBtn.textContent = 'Copy Link';
      }, 2000);
    }).catch(() => {
      // Fallback
      const textArea = document.createElement('textarea');
      textArea.value = currentPhotoUrl;
      document.body.appendChild(textArea);
      textArea.select();
      document.execCommand('copy');
      document.body.removeChild(textArea);
      
      copyBtn.textContent = 'Copied! ‚úÖ';
      setTimeout(() => {
        copyBtn.textContent = 'Copy Link';
      }, 2000);
    });
  });

  // Hide link display when clicking outside
  document.addEventListener('click', (e) => {
    if (!linkDisplay.contains(e.target) && !linkBtn.contains(e.target)) {
      linkDisplay.classList.remove('show');
    }
  });

  // Photo zoom on click
  let zoomed = false;
  mainPhoto.addEventListener('click', () => {
    if (zoomed) {
      mainPhoto.style.transform = 'scale(1)';
      zoomed = false;
    } else {
      mainPhoto.style.transform = 'scale(1.5)';
      zoomed = true;
    }
  });
</script>